<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>9 Survival Analysis for Modeling Singular Events Over Time | Handbook of Regression Modeling in People Analytics: With Examples in R, Python and Julia</title>
<meta name="author" content="Keith McNulty">
<meta name="description" content="In previous chapters, the outcomes we have been modeling have or have not occurred at a particular point in time following when the input variables were measured. For example, in Chapter 4 input...">
<meta name="generator" content="bookdown 0.22.15 with bs4_book()">
<meta property="og:title" content="9 Survival Analysis for Modeling Singular Events Over Time | Handbook of Regression Modeling in People Analytics: With Examples in R, Python and Julia">
<meta property="og:type" content="book">
<meta property="og:url" content="https://peopleanalytics-regression-book.org/survival.html">
<meta property="og:image" content="https://peopleanalytics-regression-book.org/www/cover/coverpage-og.png">
<meta property="og:description" content="In previous chapters, the outcomes we have been modeling have or have not occurred at a particular point in time following when the input variables were measured. For example, in Chapter 4 input...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="9 Survival Analysis for Modeling Singular Events Over Time | Handbook of Regression Modeling in People Analytics: With Examples in R, Python and Julia">
<meta name="twitter:site" content="@dr_keithmcnulty">
<meta name="twitter:description" content="In previous chapters, the outcomes we have been modeling have or have not occurred at a particular point in time following when the input variables were measured. For example, in Chapter 4 input...">
<meta name="twitter:image" content="https://peopleanalytics-regression-book.org/www/cover/coverpage-og.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.9.5/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.5.1/tabs.js"></script><script src="libs/bs3compat-0.2.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><meta name="citation_title" content="Handbook of Regression Modeling in People Analytics: With Examples in R and Python">
<meta name="citation_author" content="Keith McNulty">
<meta name="citation_publication_date" content="2021">
<meta name="citation_isbn" content="9781003194156">
<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script><script src="libs/plotly-binding-4.9.2.1/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet">
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-1.52.2/plotly-latest.min.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-N7JZGMVRZK"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-N7JZGMVRZK');
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="css/style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="With Examples in R, Python and Julia">Handbook of Regression Modeling in People Analytics</a>:
        <small class="text-muted">With Examples in R, Python and Julia</small>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li><a class="" href="foreword-by-alexis-fink.html">Foreword by Alexis Fink</a></li>
<li><a class="" href="introduction.html">Introduction</a></li>
<li><a class="" href="inf-model.html"><span class="header-section-number">1</span> The Importance of Regression in People Analytics</a></li>
<li><a class="" href="the-basics-of-the-r-programming-language.html"><span class="header-section-number">2</span> The Basics of the R Programming Language</a></li>
<li><a class="" href="found-stats.html"><span class="header-section-number">3</span> Statistics Foundations</a></li>
<li><a class="" href="linear-reg-ols.html"><span class="header-section-number">4</span> Linear Regression for Continuous Outcomes</a></li>
<li><a class="" href="bin-log-reg.html"><span class="header-section-number">5</span> Binomial Logistic Regression for Binary Outcomes</a></li>
<li><a class="" href="multinomial-logistic-regression-for-nominal-category-outcomes.html"><span class="header-section-number">6</span> Multinomial Logistic Regression for Nominal Category Outcomes</a></li>
<li><a class="" href="ord-reg.html"><span class="header-section-number">7</span> Proportional Odds Logistic Regression for Ordered Category Outcomes</a></li>
<li><a class="" href="modeling-explicit-and-latent-hierarchy-in-data.html"><span class="header-section-number">8</span> Modeling Explicit and Latent Hierarchy in Data</a></li>
<li><a class="active" href="survival.html"><span class="header-section-number">9</span> Survival Analysis for Modeling Singular Events Over Time</a></li>
<li><a class="" href="alt-approaches.html"><span class="header-section-number">10</span> Alternative Technical Approaches in R, Python and Julia</a></li>
<li><a class="" href="power-tests.html"><span class="header-section-number">11</span> Power Analysis to Estimate Required Sample Sizes for Modeling</a></li>
<li><a class="" href="solutions-to-exercises.html">Solutions to Exercises</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/keithmcnulty/peopleanalytics-regression-book">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="survival" class="section level1" number="9">
<h1>
<span class="header-section-number">9</span> Survival Analysis for Modeling Singular Events Over Time<a class="anchor" aria-label="anchor" href="#survival"><i class="fas fa-link"></i></a>
</h1>
<p>In previous chapters, the outcomes we have been modeling have or have not occurred at a particular point in time following when the input variables were measured. For example, in Chapter <a href="linear-reg-ols.html#linear-reg-ols">4</a> input variables were measured in the first three years of an education program and the outcome was measured at the end of the fourth year. In many situations, the outcome we are interested in is a singular event that can occur at any time following when the input variables were measured, can occur at a different time for different individuals, and once it has occurred it cannot reoccur or repeat. In medical studies, death can occur or the onset of a disease can be diagnosed at any time during the study period. In employment contexts, an attrition event can occur at various times throughout the year.</p>
<p>An obvious and simple way to deal with this would be to simply agree to look at a specific point in time and measure whether or not the event had occurred at that point, for example, ‘How many employees had left at the three-year point?’ Such an approach allows us to use standard generic regression models like those studied in previous chapters. But this approach has limitations.</p>
<p>Firstly, we are only able to infer conclusions about the likelihood of the event having occurred as at the end of the period of study. We cannot make inferences about the likelihood of the event throughout the period of study. Being able to say that attrition is twice as likely for certain types of individuals <em>at any time throughout the three years</em> is more powerful than merely saying that attrition is twice as likely at the three-year point.</p>
<p>Secondly, our sample size is constrained by the state of our data at the end of the period of study. Therefore if we lose track of an individual after two years and six months, that observation needs to be dropped from our data set if we are focused only on the three-year point. Wherever possible, loss of data is something a statistician will want to avoid as it affects the accuracy and statistical power of inferences, and also means research effort was wasted.</p>
<p><em>Survival analysis</em> is a general term for the modeling of a time-associated binary non-repeated outcome, usually involving an understanding of the comparative risk of that outcome between two or more different groups of interest. There are two common components in an elementary survival analysis, as follows:</p>
<ul>
<li>A graphical representation of the future outcome risk of the different groups over time, using <em>survival curves</em> based on Kaplan-Meier estimates of survival rate. This is usually an effective way to establish <em>prima facie</em> relevance of a certain input variable to the survival outcome and is a very effective visual way of communicating the relevance of the input variable to non-statisticians.</li>
<li>A <em>Cox proportional hazard</em> regression model to establish statistical significance of input variables and to estimate the effect of each input variable on the comparative risk of the outcome throughout the study period.</li>
</ul>
<p>Those seeking a more in depth treatment of survival analysis should consult texts on its use in medical/clinical contexts, and a recommended source is <span class="citation"><a href="references.html#ref-collett" role="doc-biblioref">Collett</a> (<a href="references.html#ref-collett" role="doc-biblioref">2015</a>)</span>. In this chapter we will use a walkthrough example to illustrate a typical use of survival analysis in a people analytics context.</p>
<p>The <code>job_retention</code> data set shows the results of a study of around 3,800 individuals employed in various fields of employment over a one-year period. At the beginning of the study, the individuals were asked to rate their sentiment towards their job. These individuals were then followed up monthly for a year to determine if they were still working in the same job or had left their job for a substantially different job. If an individual was not successfully followed up in a given month, they were no longer followed up for the remainder of the study period.</p>
<div class="sourceCode" id="cb404"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># if needed, get job_retention data</span>
<span class="va">url</span> <span class="op">&lt;-</span> <span class="st">"http://peopleanalytics-regression-book.org/data/job_retention.csv"</span>
<span class="va">job_retention</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="va">url</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">job_retention</span><span class="op">)</span></code></pre></div>
<pre><code>##   gender                  field  level sentiment intention left month
## 1      M      Public/Government   High         3         8    1     1
## 2      F                Finance    Low         8         4    0    12
## 3      M Education and Training Medium         7         7    1     5
## 4      M                Finance    Low         8         4    0    12
## 5      M                Finance   High         7         6    1     1
## 6      F                 Health Medium         6        10    1     2</code></pre>
<p>For this walkthrough example, the particular fields we are interested in are:</p>
<ul>
<li>
<code>gender</code>: The gender of the individual studied</li>
<li>
<code>field</code>: The field of employment that they worked in at the beginning of the study</li>
<li>
<code>level</code>: The level of the position in their organization at the beginning of the study—<code>Low</code>, <code>Medium</code> or <code>High</code>
</li>
<li>
<code>sentiment</code>: The sentiment score reported on a scale of 1 to 10 at the beginning of the study, with 1 indicating extremely negative sentiment and 10 indicating extremely positive sentiment</li>
<li>
<code>left</code>: A binary variable indicating whether or not the individual had left their job as at the last follow-up</li>
<li>
<code>month</code>: The month of the last follow-up</li>
</ul>
<div id="tracking-and-illustrating-survival-rates-over-the-study-period" class="section level2" number="9.1">
<h2>
<span class="header-section-number">9.1</span> Tracking and illustrating survival rates over the study period<a class="anchor" aria-label="anchor" href="#tracking-and-illustrating-survival-rates-over-the-study-period"><i class="fas fa-link"></i></a>
</h2>
<p>In our example, we are defining ‘survival’ as ‘remaining in substantially the same job’‍. We can regard the starting point as month 0, and we are following up in each of months 1 through 12. For a given month <span class="math inline">\(i\)</span>, we can define a survival rate <span class="math inline">\(S_i\)</span> as follows</p>
<p><span class="math display">\[
S_i = S_{i - 1}(1 - \frac{l_i}{n_i})
\]</span>
where <span class="math inline">\(l_i\)</span> is the number reported as left in month <span class="math inline">\(i\)</span>, and <span class="math inline">\(n_i\)</span> is the number still in substantially the same job after month <span class="math inline">\(i - 1\)</span>, with <span class="math inline">\(S_0 = 1\)</span>.</p>
<p>The <code>survival</code> package in R allows easy construction of survival rates on data in a similar format to that in our <code>job_retention</code> data set. A survival object is created using the <code><a href="https://rdrr.io/pkg/survival/man/Surv.html">Surv()</a></code> function to track the survival rate at each time period.</p>
<div class="sourceCode" id="cb406"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/therneau/survival">survival</a></span><span class="op">)</span>

<span class="co"># create survival object with event as 'left' and time as 'month'</span>
<span class="va">retention</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html">Surv</a></span><span class="op">(</span>event <span class="op">=</span> <span class="va">job_retention</span><span class="op">$</span><span class="va">left</span>, 
                  time <span class="op">=</span> <span class="va">job_retention</span><span class="op">$</span><span class="va">month</span><span class="op">)</span>

<span class="co"># view unique values of retention</span>
<span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">retention</span><span class="op">)</span></code></pre></div>
<pre><code>##  [1]  1  12+  5   2   3   6   8   4   8+  4+ 11  10   9   7+  5+  3+  7   9+ 11+ 12  10+  6+  2+  1+</code></pre>
<p>We can see that our survival object records the month at which the individual had left their job if they are recorded as having done so in the data set. If not, the object records the last month at which there was a record of the individual, appended with a ‘+’ to indicate that this was the last record available.</p>
<p>The <code><a href="https://rdrr.io/pkg/survival/man/survfit.html">survfit()</a></code> function allows us to calculate <em>Kaplan-Meier estimates</em> of survival for different groups in the data so that we can compare them. We can do this using our usual formula notation but using a survival object as the outcome. Let’s take a look at survival by gender.</p>
<div class="sourceCode" id="cb408"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># kaplan-meier estimates of survival by gender</span>
<span class="va">kmestimate_gender</span> <span class="op">&lt;-</span> <span class="fu">survival</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/survfit.html">survfit</a></span><span class="op">(</span>
  formula <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html">Surv</a></span><span class="op">(</span>event <span class="op">=</span> <span class="va">left</span>, time <span class="op">=</span> <span class="va">month</span><span class="op">)</span> <span class="op">~</span> <span class="va">gender</span>, 
  data <span class="op">=</span> <span class="va">job_retention</span>
<span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">kmestimate_gender</span><span class="op">)</span></code></pre></div>
<pre><code>## Call: survfit(formula = Surv(event = left, time = month) ~ gender, 
##     data = job_retention)
## 
##                 gender=F 
##  time n.risk n.event survival std.err lower 95% CI upper 95% CI
##     1   1167       7    0.994 0.00226        0.990        0.998
##     2   1140      24    0.973 0.00477        0.964        0.982
##     3   1102      45    0.933 0.00739        0.919        0.948
##     4   1044      45    0.893 0.00919        0.875        0.911
##     5    987      30    0.866 0.01016        0.846        0.886
##     6    940      51    0.819 0.01154        0.797        0.842
##     7    882      43    0.779 0.01248        0.755        0.804
##     8    830      47    0.735 0.01333        0.709        0.762
##     9    770      40    0.697 0.01394        0.670        0.725
##    10    718      21    0.676 0.01422        0.649        0.705
##    11    687      57    0.620 0.01486        0.592        0.650
##    12    621      17    0.603 0.01501        0.575        0.633
## 
##                 gender=M 
##  time n.risk n.event survival std.err lower 95% CI upper 95% CI
##     1   2603      17    0.993 0.00158        0.990        0.997
##     2   2559      66    0.968 0.00347        0.961        0.975
##     3   2473     100    0.929 0.00508        0.919        0.939
##     4   2360      86    0.895 0.00607        0.883        0.907
##     5   2253      56    0.873 0.00660        0.860        0.886
##     6   2171     120    0.824 0.00756        0.810        0.839
##     7   2029      85    0.790 0.00812        0.774        0.806
##     8   1916     114    0.743 0.00875        0.726        0.760
##     9   1782      96    0.703 0.00918        0.685        0.721
##    10   1661      50    0.682 0.00938        0.664        0.700
##    11   1590     101    0.638 0.00972        0.620        0.658
##    12   1460      36    0.623 0.00983        0.604        0.642</code></pre>
<p>We can see that the <code>n.risk</code>, <code>n.event</code> and <code>survival</code> columns for each group correspond to the <span class="math inline">\(n_i\)</span>, <span class="math inline">\(l_i\)</span> and <span class="math inline">\(S_i\)</span> in our formula above and that the confidence intervals for each survival rate are given. This can be very useful if we wish to illustrate a likely effect of a given input variable on survival likelihood.</p>
<p>Let’s imagine that we wish to determine if the sentiment of the individual had an impact on survival likelihood. We can divide our population into two (or more) groups based on their sentiment and compare their survival rates.</p>
<div class="sourceCode" id="cb410"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create a new field to define high sentiment (&gt;= 7)</span>
<span class="va">job_retention</span><span class="op">$</span><span class="va">sentiment_category</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span>
  <span class="va">job_retention</span><span class="op">$</span><span class="va">sentiment</span> <span class="op">&gt;=</span> <span class="fl">7</span>, 
  <span class="st">"High"</span>, 
  <span class="st">"Not High"</span>
<span class="op">)</span>

<span class="co"># generate survival rates by sentiment category</span>
<span class="va">kmestimate_sentimentcat</span> <span class="op">&lt;-</span> <span class="fu">survival</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/survfit.html">survfit</a></span><span class="op">(</span>
  formula <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html">Surv</a></span><span class="op">(</span>event <span class="op">=</span> <span class="va">left</span>, time <span class="op">=</span> <span class="va">month</span><span class="op">)</span> <span class="op">~</span> <span class="va">sentiment_category</span>,
  data <span class="op">=</span> <span class="va">job_retention</span>
<span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">kmestimate_sentimentcat</span><span class="op">)</span></code></pre></div>
<pre><code>## Call: survfit(formula = Surv(event = left, time = month) ~ sentiment_category, 
##     data = job_retention)
## 
##                 sentiment_category=High 
##  time n.risk n.event survival std.err lower 95% CI upper 95% CI
##     1   3225      15    0.995 0.00120        0.993        0.998
##     2   3167      62    0.976 0.00272        0.971        0.981
##     3   3075     120    0.938 0.00429        0.929        0.946
##     4   2932     102    0.905 0.00522        0.895        0.915
##     5   2802      65    0.884 0.00571        0.873        0.895
##     6   2700     144    0.837 0.00662        0.824        0.850
##     7   2532     110    0.801 0.00718        0.787        0.815
##     8   2389     140    0.754 0.00778        0.739        0.769
##     9   2222     112    0.716 0.00818        0.700        0.732
##    10   2077      56    0.696 0.00835        0.680        0.713
##    11   1994     134    0.650 0.00871        0.633        0.667
##    12   1827      45    0.634 0.00882        0.617        0.651
## 
##                 sentiment_category=Not High 
##  time n.risk n.event survival std.err lower 95% CI upper 95% CI
##     1    545       9    0.983 0.00546        0.973        0.994
##     2    532      28    0.932 0.01084        0.911        0.953
##     3    500      25    0.885 0.01373        0.859        0.912
##     4    472      29    0.831 0.01618        0.800        0.863
##     5    438      21    0.791 0.01758        0.757        0.826
##     6    411      27    0.739 0.01906        0.703        0.777
##     7    379      18    0.704 0.01987        0.666        0.744
##     8    357      21    0.662 0.02065        0.623        0.704
##     9    330      24    0.614 0.02136        0.574        0.658
##    10    302      15    0.584 0.02171        0.543        0.628
##    11    283      24    0.534 0.02209        0.493        0.579
##    12    254       8    0.517 0.02218        0.476        0.563</code></pre>
<p>We can see that survival seems to consistently trend higher for those with high sentiment towards their jobs. The <code><a href="https://rdrr.io/pkg/survminer/man/ggsurvplot.html">ggsurvplot()</a></code> function in the <code>survminer</code> package can visualize this neatly and also provide additional statistical information on the differences between the groups, as shown in Figure <a href="survival.html#fig:survivalplot">9.1</a>.</p>
<div class="sourceCode" id="cb412"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://www.sthda.com/english/rpkgs/survminer/">survminer</a></span><span class="op">)</span>

<span class="co"># show survival curves with p-value estimate and confidence intervals</span>
<span class="fu">survminer</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/survminer/man/ggsurvplot.html">ggsurvplot</a></span><span class="op">(</span>
  <span class="va">kmestimate_sentimentcat</span>,
  pval <span class="op">=</span> <span class="cn">TRUE</span>,
  conf.int <span class="op">=</span> <span class="cn">TRUE</span>,
  palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"blue"</span>, <span class="st">"red"</span><span class="op">)</span>,
  linetype <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"solid"</span>, <span class="st">"dashed"</span><span class="op">)</span>,
  xlab <span class="op">=</span> <span class="st">"Month"</span>,
  ylab <span class="op">=</span> <span class="st">"Retention Rate"</span>
<span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:survivalplot"></span>
<img src="_main_files/figure-html/survivalplot-1.png" alt="Survival curves by sentiment category in the `job_retention` data" width="672"><p class="caption">
Figure 9.1: Survival curves by sentiment category in the <code>job_retention</code> data
</p>
</div>
<p>This confirms that the survival difference between the two sentiment groups is statistically significant and provides a highly intuitive visualization of the effect of sentiment on retention throughout the period of study.</p>
</div>
<div id="coxphmodel" class="section level2" number="9.2">
<h2>
<span class="header-section-number">9.2</span> Cox proportional hazard regression models<a class="anchor" aria-label="anchor" href="#coxphmodel"><i class="fas fa-link"></i></a>
</h2>
<p>Let’s imagine that we have a survival outcome that we are modeling for a population over a time <span class="math inline">\(t\)</span>, and we are interested in how a set of input variables <span class="math inline">\(x_1, x_2, \dots, x_p\)</span> influences that survival outcome. Given that our survival outcome is a binary variable, we can model survival at any time <span class="math inline">\(t\)</span> as a binary logistic regression. We define <span class="math inline">\(h(t)\)</span> as the proportion who have not survived at time <span class="math inline">\(t\)</span>, called the <em>hazard function</em>, and based on our work in Chapter <a href="bin-log-reg.html#bin-log-reg">5</a>:</p>
<p><span class="math display">\[
h(t) = h_0(t)e^{\beta_1x_1 + \beta_2x_2 + \dots + \beta_px_p}
\]</span>
where <span class="math inline">\(h_0(t)\)</span> is a base or intercept hazard at time <span class="math inline">\(t\)</span>, and <span class="math inline">\(\beta_i\)</span> is the coefficient associated with <span class="math inline">\(x_i\)</span> .</p>
<p>Now let’s imagine we are comparing the hazard for two different individuals <span class="math inline">\(A\)</span> and <span class="math inline">\(B\)</span> from our population. We make an assumption that our hazard curves <span class="math inline">\(h^A(t)\)</span> for individual <span class="math inline">\(A\)</span> and <span class="math inline">\(h^B(t)\)</span> for individual <span class="math inline">\(B\)</span> are always proportional to each other and never cross—this is called the <em>proportional hazard assumption</em>. Under this assumption, we can conclude that</p>
<p><span class="math display">\[
\begin{aligned}
\frac{h^B(t)}{h^A(t)} &amp;= \frac{h_0(t)e^{\beta_1x_1^B + \beta_2x_2^B + \dots + \beta_px_p^B}}{h_0(t)e^{\beta_1x_1^A + \beta_2x_2^A + \dots + \beta_px_p^A}} \\
&amp;= e^{\beta_1(x_1^B-x_1^A) + \beta_2(x_2^B-x_2^A) + \dots \beta_p(x_p^B-x_p^A)}
\end{aligned}
\]</span></p>
<p>Note that there is no <span class="math inline">\(t\)</span> in our final equation. The important observation here is that the hazard for person B relative to person A is <em>constant and independent of time</em>. This allows us to take a complicating factor out of our model. It means we can model the effect of input variables on the hazard without needing to account for changes over times, making this model very similar in interpretation to a standard binomial regression model.</p>
<div id="running-a-cox-proportional-hazard-regression-model" class="section level3" number="9.2.1">
<h3>
<span class="header-section-number">9.2.1</span> Running a Cox proportional hazard regression model<a class="anchor" aria-label="anchor" href="#running-a-cox-proportional-hazard-regression-model"><i class="fas fa-link"></i></a>
</h3>
<p>A Cox proportional hazard model can be run using the <code><a href="https://rdrr.io/pkg/survival/man/coxph.html">coxph()</a></code> function in the <code>survival</code> package, with the outcome as a survival object. Let’s model our survival against the input variables <code>gender</code>, <code>field</code>, <code>level</code> and <code>sentiment</code>.</p>
<div class="sourceCode" id="cb413"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># run cox model against survival outcome</span>
<span class="va">cox_model</span> <span class="op">&lt;-</span> <span class="fu">survival</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/coxph.html">coxph</a></span><span class="op">(</span>
  formula <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html">Surv</a></span><span class="op">(</span>event <span class="op">=</span> <span class="va">left</span>, time <span class="op">=</span> <span class="va">month</span><span class="op">)</span> <span class="op">~</span> <span class="va">gender</span> <span class="op">+</span> 
    <span class="va">field</span> <span class="op">+</span> <span class="va">level</span> <span class="op">+</span> <span class="va">sentiment</span>,
  data <span class="op">=</span> <span class="va">job_retention</span>
<span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">cox_model</span><span class="op">)</span></code></pre></div>
<pre><code>## Call:
## survival::coxph(formula = Surv(event = left, time = month) ~ 
##     gender + field + level + sentiment, data = job_retention)
## 
##   n= 3770, number of events= 1354 
## 
##                            coef exp(coef) se(coef)      z Pr(&gt;|z|)    
## genderM                -0.04548   0.95553  0.05886 -0.773 0.439647    
## fieldFinance            0.22334   1.25025  0.06681  3.343 0.000829 ***
## fieldHealth             0.27830   1.32089  0.12890  2.159 0.030849 *  
## fieldLaw                0.10532   1.11107  0.14515  0.726 0.468086    
## fieldPublic/Government  0.11499   1.12186  0.08899  1.292 0.196277    
## fieldSales/Marketing    0.08776   1.09173  0.10211  0.859 0.390082    
## levelLow                0.14813   1.15967  0.09000  1.646 0.099799 .  
## levelMedium             0.17666   1.19323  0.10203  1.732 0.083362 .  
## sentiment              -0.11756   0.88909  0.01397 -8.415  &lt; 2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
##                        exp(coef) exp(-coef) lower .95 upper .95
## genderM                   0.9555     1.0465    0.8514    1.0724
## fieldFinance              1.2502     0.7998    1.0968    1.4252
## fieldHealth               1.3209     0.7571    1.0260    1.7005
## fieldLaw                  1.1111     0.9000    0.8360    1.4767
## fieldPublic/Government    1.1219     0.8914    0.9423    1.3356
## fieldSales/Marketing      1.0917     0.9160    0.8937    1.3336
## levelLow                  1.1597     0.8623    0.9721    1.3834
## levelMedium               1.1932     0.8381    0.9770    1.4574
## sentiment                 0.8891     1.1248    0.8651    0.9138
## 
## Concordance= 0.578  (se = 0.008 )
## Likelihood ratio test= 89.18  on 9 df,   p=2e-15
## Wald test            = 94.95  on 9 df,   p=&lt;2e-16
## Score (logrank) test = 95.31  on 9 df,   p=&lt;2e-16</code></pre>
<p>The model returns the following<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;The concordance measure returned is a measure of how well the model can predict in any given pair who will survive longer and is valuable in a number of medical research contexts.&lt;/p&gt;"><sup>40</sup></a></p>
<ul>
<li><p>Coefficients for each input variable and their p-values. Here we can conclude that working in Finance or Health is associated with a significantly greater likelihood of leaving over the period studied, and that higher sentiment is associated with a significantly lower likelihood of leaving.</p></li>
<li><p>Relative odds ratios associated with each input variable. For example, a single extra point in sentiment reduces the odds of leaving by ~11%. A single less point increases the odds of leaving by ~12%. Confidence intervals for the coefficients are also provided.</p></li>
<li><p>Three statistical tests on the null hypothesis that the coefficients are zero. This null hypothesis is rejected by all three tests which can be interpreted as meaning that the model is significant.</p></li>
</ul>
<p>Importantly, as well as statistically validating that sentiment has a significant effect on retention, our Cox model has allowed us to control for possible mediating variables. We can now say that sentiment has a significant effect on retention even for individuals of the same gender, in the same field and at the same level.</p>
</div>
<div id="checking-the-proportional-hazard-assumption" class="section level3" number="9.2.2">
<h3>
<span class="header-section-number">9.2.2</span> Checking the proportional hazard assumption<a class="anchor" aria-label="anchor" href="#checking-the-proportional-hazard-assumption"><i class="fas fa-link"></i></a>
</h3>
<p>Note that we mentioned in the previous section a critical assumption for our Cox proportional hazard model to be valid, called the proportional hazard assumption. As always, it is important to check this assumption before finalizing any inferences or conclusions from your model.</p>
<p>The most popular test of this assumption uses a residual known as a <em>Schoenfeld residual</em>, which would be expected to be independent of time if the proportional hazard assumption holds. The <code><a href="https://rdrr.io/pkg/survival/man/cox.zph.html">cox.zph()</a></code> function in the <code>survival</code> package runs a statistical test on the null hypothesis that the Schoenfeld residuals are independent of time. The test is conducted on every input variable and on the model as a whole, and a significant result would reject the proportional hazard assumption.</p>
<div class="sourceCode" id="cb415"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="va">ph_check</span> <span class="op">&lt;-</span> <span class="fu">survival</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/cox.zph.html">cox.zph</a></span><span class="op">(</span><span class="va">cox_model</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>##            chisq df    p
## gender     0.726  1 0.39
## field      6.656  5 0.25
## level      2.135  2 0.34
## sentiment  1.828  1 0.18
## GLOBAL    11.156  9 0.27</code></pre>
<p>In our case, we can confirm that the proportional hazard assumption is not rejected. The <code><a href="https://rdrr.io/pkg/survminer/man/ggcoxzph.html">ggcoxzph()</a></code> function in the <code>survminer</code> package takes the result of the <code><a href="https://rdrr.io/pkg/survival/man/cox.zph.html">cox.zph()</a></code> check and allows a graphical check by plotting the residuals against time, as seen in Figure <a href="survival.html#fig:schoenfeld">9.2</a>.</p>
<div class="sourceCode" id="cb417"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">survminer</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/survminer/man/ggcoxzph.html">ggcoxzph</a></span><span class="op">(</span><span class="va">ph_check</span>, 
                    font.main <span class="op">=</span> <span class="fl">10</span>, 
                    font.x <span class="op">=</span> <span class="fl">10</span>, 
                    font.y <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:schoenfeld"></span>
<img src="_main_files/figure-html/schoenfeld-1.png" alt="Schoenfeld test on proportional hazard assumption for `cox_model`" width="672"><p class="caption">
Figure 9.2: Schoenfeld test on proportional hazard assumption for <code>cox_model</code>
</p>
</div>
</div>
</div>
<div id="frailty-models" class="section level2" number="9.3">
<h2>
<span class="header-section-number">9.3</span> Frailty models<a class="anchor" aria-label="anchor" href="#frailty-models"><i class="fas fa-link"></i></a>
</h2>
<p>We noticed in our example in the previous section that certain fields of employment appeared to have a significant effect on the attrition hazard. It is therefore possible that different fields of employment have different base hazard functions, and we may wish to take this into account in determining if input variables have a significant relationship with attrition. This is analogous to a mixed model which we looked at in Section <a href="modeling-explicit-and-latent-hierarchy-in-data.html#mixed">8.1</a>.</p>
<p>In this case we would apply a random intercept effect to the base hazard function <span class="math inline">\(h_0(t)\)</span> according to the field of employment of an individual, in order to take this into account in our modeling. This kind of model is called a <em>frailty model</em>, taken from the clinical context, where different groups of patients may have different frailties (background risks of death).</p>
<p>There are many variants of how frailty models are run in the clinical context (see <span class="citation"><a href="references.html#ref-collett" role="doc-biblioref">Collett</a> (<a href="references.html#ref-collett" role="doc-biblioref">2015</a>)</span> for an excellent exposition of these), but the main application of a frailty model in people analytics would be to adapt a Cox proportional hazard model to take into account different background risks of the hazard event occurring among different groups in the data. This is called a <em>shared frailty model</em>. The <code>frailtypack</code> R package allows various frailty models to be run with relative ease. This is how we would run a shared frailty model on our <code>job_retention</code> data to take account of the different background attrition risk for the different fields of employment.</p>
<div class="sourceCode" id="cb418"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://virginie1rondeau.wixsite.com/virginierondeau/software-frailtypack">frailtypack</a></span><span class="op">)</span>

<span class="op">(</span><span class="va">frailty_model</span> <span class="op">&lt;-</span> <span class="fu">frailtypack</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/frailtypack/man/frailtyPenal.html">frailtyPenal</a></span><span class="op">(</span>
  formula <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html">Surv</a></span><span class="op">(</span>event <span class="op">=</span> <span class="va">left</span>, time <span class="op">=</span> <span class="va">month</span><span class="op">)</span> <span class="op">~</span> <span class="va">gender</span> <span class="op">+</span> 
    <span class="va">level</span> <span class="op">+</span> <span class="va">sentiment</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/pkg/frailtypack/man/cluster.html">cluster</a></span><span class="op">(</span><span class="va">field</span><span class="op">)</span>,
  data <span class="op">=</span> <span class="va">job_retention</span>,
  n.knots <span class="op">=</span> <span class="fl">12</span>, 
  kappa <span class="op">=</span> <span class="fl">10000</span>
<span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## 
## Be patient. The program is computing ... 
## The program took 1.74 seconds</code></pre>
<pre><code>## Call:
## frailtypack::frailtyPenal(formula = Surv(event = left, time = month) ~ 
##     gender + level + sentiment + cluster(field), data = job_retention, 
##     n.knots = 12, kappa = 10000)
## 
## 
##   Shared Gamma Frailty model parameter estimates  
##   using a Penalized Likelihood on the hazard function 
## 
##                  coef exp(coef) SE coef (H) SE coef (HIH)         z          p
## genderM     -0.029531  0.970901   0.0591820     0.0591820 -0.498986 6.1779e-01
## levelLow     0.198548  1.219630   0.0917396     0.0917396  2.164255 3.0445e-02
## levelMedium  0.223266  1.250154   0.1035510     0.1035510  2.156101 3.1076e-02
## sentiment   -0.108262  0.897392   0.0141325     0.0141325 -7.660518 1.8541e-14
## 
##         chisq df global p
## level 5.28624  2   0.0711
## 
##     Frailty parameter, Theta: 48.3209 (SE (H): 25.5895 ) p = 0.029492 
##  
##       penalized marginal log-likelihood = -5510.36
##       Convergence criteria: 
##       parameters = 3.05e-05 likelihood = 4.91e-06 gradient = 1.55e-09 
## 
##       LCV = the approximate likelihood cross-validation criterion
##             in the semi parametrical case     = 1.46587 
## 
##       n= 3770
##       n events= 1354  n groups= 6
##       number of iterations:  18 
## 
##       Exact number of knots used:  12 
##       Value of the smoothing parameter:  10000, DoF:  6.31</code></pre>
<p>We can see that the frailty parameter is significant, indicating that there is sufficient difference in the background attrition risk to justify the application of a random hazard effect. We also see that the level of employment now becomes more significant in addition to sentiment, with Low and Medium level employees more likely to leave compared to High level employees.</p>
<p>The <code><a href="https://rdrr.io/pkg/frailtypack/man/frailtyPenal.html">frailtyPenal()</a></code> function can also be a useful way to observe the different baseline survivals for groups in the data. For example, a simple stratified Cox proportional hazard model based on sentiment category can be constructed<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Note there needs to be a &lt;code&gt;kappa&lt;/code&gt; for each level of the stratification.&lt;/p&gt;"><sup>41</sup></a>.</p>
<div class="sourceCode" id="cb421"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">stratified_base</span> <span class="op">&lt;-</span> <span class="fu">frailtypack</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/frailtypack/man/frailtyPenal.html">frailtyPenal</a></span><span class="op">(</span>
  formula <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html">Surv</a></span><span class="op">(</span>event <span class="op">=</span> <span class="va">left</span>, time <span class="op">=</span> <span class="va">month</span><span class="op">)</span> <span class="op">~</span> 
    <span class="fu"><a href="https://rdrr.io/pkg/survival/man/strata.html">strata</a></span><span class="op">(</span><span class="va">sentiment_category</span><span class="op">)</span>,
  data <span class="op">=</span> <span class="va">job_retention</span>,
  n.knots <span class="op">=</span> <span class="fl">12</span>,
  kappa <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">10000</span>, <span class="fl">2</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p>This can then be plotted to observe how baseline retention differs by group, as in Figure <a href="survival.html#fig:stratified">9.3</a><a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;This is another route to calculating survival curves similar to Figure &lt;a href="survival.html#fig:survivalplot"&gt;9.1&lt;/a&gt;.&lt;/p&gt;'><sup>42</sup></a>.</p>
<div class="sourceCode" id="cb422"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">stratified_base</span>, type.plot <span class="op">=</span> <span class="st">"Survival"</span>, 
     pos.legend <span class="op">=</span> <span class="st">"topright"</span>, Xlab <span class="op">=</span> <span class="st">"Month"</span>,
     Ylab <span class="op">=</span> <span class="st">"Baseline retention rate"</span>,
     color <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:stratified"></span>
<img src="_main_files/figure-html/stratified-1.png" alt="Baseline retention curves for the two sentiment categories in the `job_retention` data set" width="672"><p class="caption">
Figure 9.3: Baseline retention curves for the two sentiment categories in the <code>job_retention</code> data set
</p>
</div>
</div>
<div id="learning-exercises-7" class="section level2" number="9.4">
<h2>
<span class="header-section-number">9.4</span> Learning exercises<a class="anchor" aria-label="anchor" href="#learning-exercises-7"><i class="fas fa-link"></i></a>
</h2>
<div id="discussion-questions-7" class="section level3" number="9.4.1">
<h3>
<span class="header-section-number">9.4.1</span> Discussion questions<a class="anchor" aria-label="anchor" href="#discussion-questions-7"><i class="fas fa-link"></i></a>
</h3>
<ol style="list-style-type: decimal">
<li>Describe some of the reasons why a survival analysis is a useful tool for analyzing data where outcome events happen at different times.</li>
<li>Describe the Kaplan-Meier survival estimate and how it is calculated.</li>
<li>What are some common uses for survival curves in practice?</li>
<li>Why is it important to run a Cox proportional hazard model in addition to calculating survival estimates when trying to understand the effect of a given variable on survival?</li>
<li>Describe the assumption that underlies a Cox proportional hazard model and how this assumption can be checked.</li>
<li>What is a frailty model, and why might it be useful in the context of survival analysis?</li>
</ol>
</div>
<div id="data-exercises-7" class="section level3" number="9.4.2">
<h3>
<span class="header-section-number">9.4.2</span> Data exercises<a class="anchor" aria-label="anchor" href="#data-exercises-7"><i class="fas fa-link"></i></a>
</h3>
<p>For these exercises, use the same <code>job_retention</code> data set as in the walkthrough example for this chapter, which can be loaded via the <code>peopleanalyticsdata</code> package or downloaded from the internet<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="http://peopleanalytics-regression-book.org/data/job_retention.csv" class="uri"&gt;http://peopleanalytics-regression-book.org/data/job_retention.csv&lt;/a&gt;&lt;/p&gt;'><sup>43</sup></a>. The <code>intention</code> field represents a score of 1 to 10 on the individual’s intention to leave their job in the next 12 months, where 1 indicates an extremely low intention and 10 indicates an extremely high intention. This response was recorded at the beginning of the study period.</p>
<ol style="list-style-type: decimal">
<li>Create three categories of <code>intention</code> as follows: High (score of 7 or higher), Moderate (score of 4–6), Low (score of 3 or less)</li>
<li>Calculate Kaplan-Meier survival estimates for the three categories and visualize these using survival curves.</li>
<li>Determine the effect of <code>intention</code> on retention using a Cox proportional hazard model, controlling for <code>gender</code>, <code>field</code> and <code>level</code>.</li>
<li>Perform an appropriate check that the proportional hazard assumption holds for your model.</li>
<li>Run a similar model, but this time include the <code>sentiment</code> input variable. How would you interpret the results?</li>
<li>Experiment with running a frailty model to take into account the different background attrition risk by field of employment.</li>
</ol>
</div>
</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="modeling-explicit-and-latent-hierarchy-in-data.html"><span class="header-section-number">8</span> Modeling Explicit and Latent Hierarchy in Data</a></div>
<div class="next"><a href="alt-approaches.html"><span class="header-section-number">10</span> Alternative Technical Approaches in R, Python and Julia</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#survival"><span class="header-section-number">9</span> Survival Analysis for Modeling Singular Events Over Time</a></li>
<li><a class="nav-link" href="#tracking-and-illustrating-survival-rates-over-the-study-period"><span class="header-section-number">9.1</span> Tracking and illustrating survival rates over the study period</a></li>
<li>
<a class="nav-link" href="#coxphmodel"><span class="header-section-number">9.2</span> Cox proportional hazard regression models</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#running-a-cox-proportional-hazard-regression-model"><span class="header-section-number">9.2.1</span> Running a Cox proportional hazard regression model</a></li>
<li><a class="nav-link" href="#checking-the-proportional-hazard-assumption"><span class="header-section-number">9.2.2</span> Checking the proportional hazard assumption</a></li>
</ul>
</li>
<li><a class="nav-link" href="#frailty-models"><span class="header-section-number">9.3</span> Frailty models</a></li>
<li>
<a class="nav-link" href="#learning-exercises-7"><span class="header-section-number">9.4</span> Learning exercises</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#discussion-questions-7"><span class="header-section-number">9.4.1</span> Discussion questions</a></li>
<li><a class="nav-link" href="#data-exercises-7"><span class="header-section-number">9.4.2</span> Data exercises</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/keithmcnulty/peopleanalytics-regression-book/blob/master/r/09-survival_analysis.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/keithmcnulty/peopleanalytics-regression-book/edit/master/r/09-survival_analysis.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Handbook of Regression Modeling in People Analytics</strong>: With Examples in R, Python and Julia" was written by Keith McNulty. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
